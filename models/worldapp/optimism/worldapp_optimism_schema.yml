version: 2

models:

  - name: worldapp_optimism_actions
    meta:
      blockchain: optimism
      sector: worldapp
    description: "Actions made by WorldApp users"
    tests:
      - unique:
          column_name: "(TRANSACTION_HASH || '-' || TRACE_ID)"
    columns:
      - &BLOCK_TIMESTAMP
        name: BLOCK_TIMESTAMP
        description: "time when the block was mined"
      - &BLOCK_DATE
        name: BLOCK_DATE
        description: "day when the block was mined"
      - &TRANSACTION_HASH
        name: TRANSACTION_HASH
        description: "transaction hash of the bundle"
      - &TRACE_ID
        name: TRACE_ID
        description: "unique hash of the trace"
      - &ACCOUNT
        name: ACCOUNT
        description: "worldcoin safe account address"
      - &BUNDLER
        name: BUNDLER
        description: "the bundler of the action"
      - &TXN_TYPE
        name: TXN_TYPE
        description: "the type of action"
      - &INPUT
        name: INPUT
        description: "the calldata of the action"

  - name: worldapp_optimism_account_deployments
    meta:
      blockchain: optimism
      sector: worldapp
    description: "Deployments of worlcoin safe accounts"
    tests:
      - unique:
          column_name: "(TRANSACTION_HASH || '-' || TRACE_ID)"
    columns:
      - *BLOCK_TIMESTAMP
      - *BLOCK_DATE
      - *TRANSACTION_HASH
      - *TRACE_ID
      - *ACCOUNT